<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="./cart.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <section class="s1 pt-1 pb-1">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="m-0 text-white">Brand Waali Quality, Bazaar Waali Deal!</h1>
            <div class="s1d1">
                <a href="" class="text-white">Impact@Snapdeal</a>
                <a href="" class="text-white">Help Center</a>
                <a href="" class="text-white">Sell On Snapdeal</a>
                <a href="" class="text-white"><i class="bi bi-phone"></i>Download App</a>
            </div>
        </div>
    </section>

    <section class="s2 pt-3 pb-3">
        <div class="container d-flex justify-content-between">
            <img src="./images/logo.svg" alt="">
            <form action="" class="d-flex justify-content-center align-items-stretch">
                <input type="text" class="border-0 ps-4 pt-1 pb-1 fs-6" placeholder="Search products & brands">
                <button type="submit" class="btn btn-dark m-0 rounded-0 d-flex gap-2"><i
                        class="bi bi-search"></i>Search</button>
            </form>
            <div class="d-flex justify-content-center align-items-center gap-5">
                <a href="./cart.html"
                    class="carts text-white text-decoration-none d-flex gap-3 justify-content-center align-items-center">
                    <h4 class="m-0 fs-6 text-white fw-normal">Cart</h4>
                    <div class="position-relative">
                        <i class="bi bi-cart fs-5"></i>
                        <span class="badge"></span>
                    </div>
                </a>
                <span style="cursor: pointer;"
                class="users ps-4 pt-2 pb-2 pe-4 position-relative text-white text-decoration-none d-flex gap-3 justify-content-center align-items-center">
                <h4 class="m-0 fs-6 text-white fw-normal" id="user"></h4>
                <i class="bi bi-person-fill fs-5 d-flex justify-content-center align-items-center rounded-circle"
                    style="width: 40px; height: 40px; background: linear-gradient(rgba(0, 0, 0, 0.223),rgba(0,0,0,0.223));"></i>
                <ul class="submenu shadow-lg p-0">
                    <li class="pt-3">
                        <h1 class="m-0 fs-6 ps-3"><a href="" style="color: rgb(212, 211, 211);" class="text-decoration-none"><i class="fa-solid fa-cubes"></i>&nbsp;&nbsp;Orders</a></h1>
                    </li>
                    <hr>
                    <li class="pb-3">
                        <h1 class="m-0 fs-6 ps-3"><span style="color: rgb(212, 211, 211);;" class="text-decoration-none" id="logout">Logout</span></h1>
                    </li>
                </ul>
            </span>
            </div>
        </div>
    </section>

    <section>
        <div class="container d-flex mt-4 mb-4">
            <div><a href="./index.html" class="fs-5" style="color: gray;">Home</a>
        </div>
    </section>

    <section class="s5 pt-5 d-flex justify-content-between flex-column" style="background-color: #f7f7f7;">
        <div class="container bg-white py-5">
             <div class="row w-100 ps-3" id="single-product">
                <h1 class="text-danger text-center" id="shopcart">Shoppig cart is empty...!</h1>
                 <table class="table table-bordered" style="border: 2px solid gray;">
                    <thead>
                        
                    </thead>
                    <tbody>

                    </tbody>
                 </table>
                </div>
            </div>
            <div class="totalBox bg-dark pt-5 pb-5" style="display: none;">
               <div class="d-flex justify-content-evenly w-100 h-100 align-items-center">
                <div class="box1 mb-5">
                    <h2 class="m-0 fs-5">Delivery and payment options can be selected later</h2>
                    <div class="mt-3">
                     <p class="m-0 d-flex gap-2 align-items-center"><i class="fa-solid fa-shield-halved"></i>Safe and Secure Payments</p>
                    <p class="m-0 d-flex gap-2 align-items-center"><i class="fa-solid fa-id-card"></i>100% Payment Protection, Easy Returns Policy</p>
                    </div>
                </div>
                <div class="box2">
                     <div class="b1">
                         <h2 class="m-0 fs-5">Sub Total : </h2>
                         <h2 class="m-0 fs-5">Delivery Charges : </h2>
                     </div>
                     <div class="b2">
                         <h2 class="m-0 fs-5" id="totalPrice"></h2>
                         <h2 class="m-0 fs-5" style="color: #518131;">FREE</h2>
                     </div>
                 </div>
                 <div class="box3">
                      <button class="btn fs-4 ps-4 pe-4" id="mainTotalPrice"></button>
                 </div>
               </div>
            </div>
     </section>

    <div class="s6" style="margin-top: 200px;">
        <div class="container d-flex justify-content-center align-items-center p-0">
            <a href="" class="d-flex p-3 flex-column justify-content-evenly align-items-center gap-3">
                <i class="fa-solid fa-lock fs-1"></i>
                <h1 class="m-0 fs-4 text-center">100% Secure Payments</h1>
                <p class="m-0 text-center">Moving your card details to a much more secured place</p>
            </a>
            <a href="" class="d-flex p-3 flex-column justify-content-evenly align-items-center gap-3">
                <i class="fa-solid fa-shield-halved fs-1"></i>
                <h1 class="m-0 fs-4 text-center">Trustpay</h1>
                <p class="m-0 text-center">100% Payment Protection. Easy Return Policy</p>
            </a>
            <a href="" class="d-flex p-3 flex-column justify-content-evenly align-items-center gap-3">
                <i class="fa-solid fa-headset fs-1"></i>
                <h1 class="m-0 fs-4 text-center">Help Center</h1>
                <p class="m-0 text-center">Got a question? Look no further. Browser our FAQs or submit your query
                    here.</p>
            </a>
            <a href="" class="d-flex p-3 flex-column justify-content-evenly align-items-center gap-3">
                <i class="fa-solid fa-mobile-screen-button fs-1"></i>
                <h1 class="m-0 fs-4 text-center">Shop on the go</h1>
                <p class="m-0 text-center">Download the app and get exciting app only offers at your fingertips</p>
            </a>
        </div>
    </div>

    <section class="s7 mt-5">
        <div class="container d-flex justify-content-between">
            <div class="s7d1">
                <h1 class="m-0 fs-6 text-uppercase">Policy Info</h1>
                <ul class="m-0 p-0 mt-3">
                    <li><a href="">Privacy Policy</a></li>
                    <li><a href="">Terms of initial-scale</a></li>
                    <li><a href="">Terms of User</a></li>
                    <li><a href="">Report Abuse & Takedown Policy</a></li>
                    <li><a href="">Know Your BIS Standard</a></li>
                    <li><a href="">Products Under Cumpulsory BIS</a></li>
                    <li><a href="">Certification</a></li>
                    <li><a href="">FAQ</a></li>
                </ul>
            </div>
            <div class="s7d2">
                <h1 class="m-0 fs-6 text-uppercase">Company</h1>
                <ul class="m-0 p-0 mt-3">
                    <li><a href="">Impact@Snapdeal</a></li>
                    <li><a href="">Careers</a></li>
                    <li><a href="">Blog</a></li>
                    <li><a href="">Sitemap</a></li>
                    <li><a href="">Contact Us</a></li>
                </ul>
            </div>
            <div class="s7d3">
                <h1 class="m-0 fs-6 text-uppercase">Snapdeal Business</h1>
                <ul class="m-0 p-0 mt-3">
                    <li><a href="">Shopping App</a></li>
                    <li><a href="">Sell on Snapdeal</a></li>
                    <li><a href="">Media Enquiries</a></li>
                </ul>
            </div>
            <div class="s7d4">
                <h1 class="m-0 fs-6 text-uppercase">Popular Links</h1>
                <ul class="m-0 p-0 mt-3">
                    <li><a href="">Lehenga</a></li>
                    <li><a href="">Kid's Clothing</a></li>
                    <li><a href="">Sarees</a></li>
                    <li><a href="">Winter Wear</a></li>
                </ul>
            </div>
            <div class="s7d5">
                <h1 class="m-0 fs-6 text-uppercase">Subscribe</h1>
                <form action="" class="mt-4 d-flex justify-content-start">
                    <input type="email" class="ps-2 border-0" placeholder="Your email address">
                    <button type="submit" class="btn m-0 btn-dark rounded-0 ps-2 pe-2 p-0">Subscribe</button>
                </form>
                <p class="p-0 pt-3">Register now to get updates on promotions and coupons. <a href=""
                        class="text-decoration-none">Or Download App</a></p>
            </div>
        </div>
    </section>

    <section class="s8 mt-5">
        <hr>
        <div class="container d-flex justify-content-between align-items-center">
            <div class="">
                <h1 class="fs-5">Payment</h1>
                <div class="cards d-flex justify-content-start align-items-center gap-3">
                    <i class="fa-regular fs-3 fa-credit-card"></i>
                    <i class="fa-brands fs-3 fa-cc-mastercard"></i>
                    <i class="fa-solid fs-2 fa-money-check"></i>
                    <i class="fa-regular fs-2 fa-money-bill-1"></i>
                </div>
            </div>
            <div class="">
                <h1 class="fs-5">Connect</h1>
                <div class="links d-flex justify-content-start align-items-center gap-3">
                    <a href="" class="text-decoration-none"><img src="./images/l1.png" alt=""></a>
                    <a href="" class="text-decoration-none"><img src="./images/l2.png" alt=""></a>
                    <a href="" class="text-decoration-none"><img src="./images/l3.png" alt=""></a>
                    <a href="" class="text-decoration-none"><img src="./images/l4.png" alt=""></a>
                    <a href="" class="text-decoration-none"><img src="./images/l5.png" alt=""></a>
                    <a href="" class="text-decoration-none"><img src="./images/l6.png" alt=""></a>
                </div>
            </div>
        </div>
        <hr>
    </section>

    <footer class="mt-4">
        <div class="container d-flex justify-content-between align-items-center">
            <p>Copyright &copy;2021, Snapdeal Limited, All Rights Reserved</p>
            <p>Made for Bharat &hearts;</p>
        </div>
    </footer>

</body>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
    var swiper = new Swiper(".mySwiper", {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        autoplay: true,
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
        navigation: {
            nextEl: ".bi-chevron-right",
            prevEl: ".bi-chevron-left",
        },
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>

    document.querySelector("#logout").addEventListener("click",()=>{
        Swal.fire({
            title: "Do you want to logout?",
            icon: "question",
            showCancelButton: true,
            confirmButtonText: "Yes"
        }).then((result) => {
        /* Read more about isConfirmed, isDenied below */
        if (result.isConfirmed) {
            localStorage.removeItem("email");
            window.location.href = "signin.html";
        }
        });
    })

</script>
<script>

    view();

    function view()
    {
        let email = JSON.parse(localStorage.getItem("email"))
        fetch(`http://localhost:3000/carts?UserEmailID=${email}`)
        .then((res)=>res.json())
        .then((res)=>{
            if(res == "")
            {
                document.querySelector(".badge").innerHTML = "0";
            }
            else
            {
                let count = 0;
                let total = 0;
                let data = "";
                res.forEach((el,i)=>{
                    count++;
                    total += el.ImagePrice;
                    data += `
                        <tr>
                        <td class="d-flex pt-3 pb-3 gap-3 justify-content-evenly align-items-center"><img src="${el.ImageURL}"/ style="width:80px; height:80px;"><p style="width:250px">${el.ImageTitle}<button class="bg-white ps-3 pe-3 ms-4 pt-1 pb-1 mt-2">X Remove</button></p></td>
                        <td class="text-center pt-3 pb-3">${el.ImagePrice}</td>
                        <td class="pt-3 pb-3">
                            <div class="d-flex justify-content-center align-items-center">
                                <select class="border-0 w-75 m-0 p-0 text-center">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                            </select>
                            </div>
                        </td>
                        <td class="text-center pt-3 pb-3">Check availability and delivery charges for your pincode</td>
                        <td class="text-center pt-3 pb-3">${el.ImagePrice*el.ImageQty}</td>
                        </tr>
                    `;
                })
                document.querySelector(".badge").innerHTML = count;
                document.querySelector(".s5").style.height = "100vh";
                document.querySelector("#shopcart").style.display = "none";
                document.querySelector(".totalBox").style.display = "block";
                document.querySelector("thead").innerHTML = `
                <th class="pt-3 pb-3 ps-3 text-center" style="background: rgb(222, 222, 222);">Item Details</th>
                        <th class="pt-3 pb-3 text-center" style="background: rgb(222, 222, 222);">Price</th>
                        <th class="pt-3 pb-3 text-center" style="background: rgb(222, 222, 222);">Quantity</th>
                        <th class="pt-3 pb-2 justify-content-evenly d-flex align-items-center gap-3" style="background: rgb(222, 222, 222);">
                            <p class="m-0">Delivery with Charges</p>
                            <form action="" class="d-flex justify-content-center align-items-center">
                                <input type="tel" placeholder="Pincode" class="ps-2 border border-dark bg-white" style="width: 150px; height: 37.5px;">
                                <button type="submit" class="btn btn-dark rounded-0">Check</button>
                            </form>
                        </th>
                        <th class="pt-3 text-center pb-3 pe-3" style="background: rgb(222, 222, 222);">Subtotal</th>
                `;
                document.querySelector("tbody").innerHTML = data;
                document.querySelector("#totalPrice").innerHTML = `Rs. ${total}`;
                document.querySelector("#mainTotalPrice").innerHTML = `Proceed To Pay Rs. ${total}`;
            }
        })
        .catch((err)=>{
            console.log(err);
        })
    }

</script>
<script>

    document.querySelector("#logout").addEventListener("click",()=>{
            Swal.fire({
                title: "Do you want to logout?",
                icon: "question",
                showCancelButton: true,
                confirmButtonText: "Yes"
            }).then((result) => {
            /* Read more about isConfirmed, isDenied below */
            if (result.isConfirmed) {
                localStorage.removeItem("email");
                window.location.href = "signin.html";
            }
            });
        });

        document.querySelector("#mainTotalPrice").addEventListener("click",()=>{
            window.location.href = "index.html";
        })
    
    </script>
<script>

    let getEmail = JSON.parse(localStorage.getItem("email"));

    fetch(`http://localhost:3000/users?email=${getEmail}`)
    .then((res)=>res.json())
    .then((res)=>{
        if(res.length == 0)
        {
            document.querySelector("#user").innerHTML = "User";
        }
        else
        {
            let name = res[0].username.split(" ");
            // console.log(name[0]);
            document.querySelector("#user").innerHTML = name[0];
        }
        console.log(res);
    })
    .catch((err)=>{
        console.log(err);
    })


</script>
</html>